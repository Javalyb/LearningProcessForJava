并发:  

并发与并行的区别:  Java是通过线程实现并发和并行;
    可以从并发和并行的优缺点围绕安全，速度和顺序这几点讨论;
    并发: 主要讨论的是安全的问题;
        多个线程在同一个时间段内访问同一个共享资源;
    并行(反义词:串行): 主要讨论的是速度的问题;
        多个线程访问同一个资源的时候，可以把资源拆解多份，让多个线程同时访问被拆解的资源;
    同步和异步: 讨论的是顺序的问题;
    Brian Goetz对并发和并行对定义:
        并发: 是关于正确有效的控制对共享资源的访问;
        并行: 是使用额外的资源来更快的产生结果;

保证变量同步可见性:
    1.final;
    2.synchronized;
    3.volatile;

Java内存模型:
    主内存(线程共享): 堆，方法区;
    工作内存(线程私有): 虚拟机栈，本地方法栈，程序计数器;
    1.共享变量必须存放在主内存中;
    2.线程有自己的工作内存，只可操作自己的工作内存;
    3.线程要操作共享变量，必须从主内存中通过同步协议读取到工作内存中，
      改变值后从工作内存通过同步协议同步到主内存;

同步协议8中原子操作:
    原子操作: 不会被线程调度机制打断的操作。这种操作一旦开始，就一直运行到结束，中间不会被切换到另一个线程;
    1.lock(锁定): 将主内存中的变量锁定，为一个线程独占;
    2.unlock(解锁): 将lock加的锁定解除，此时其他的线程可以有机会访问此变量;
    3.read(读取): 作用于主内存变量，将主内存中的变量值读取到工作内存中;
    4.load(载入): 作用于工作内存变量，将read读取的值保存到工作内存中的变量副本中;
    5.use(使用): 作用于工作内存变量，将值传递给线程的代码执行引擎;
    6.assign(赋值): 作用于工作内存变量，将执行引擎处理返回的值重新赋值给变量副本;
    7.store(存储): 作用于工作内存变量，将变量副本的值传送到主内存中;
    8.write(写入): 作用于主内存变量，将store传送过来的值写入到主内存的共享变量中;
1.将一个变量从主内存复制到工作内存要顺序执行read，load操作；
  将变量从工作内存同步回主内存要顺序执行store，write操作；
  只要求顺序执行，不要求连续执行;
2.做了assign操作，必须同步回主内存。不能没做assign操作，同步回主内存;

JVM内存模型:
    堆，方法区，虚拟机栈，本地方法栈，程序计数器;

CAS(比较替换): 乐观锁的一种实现
    预期值
    目标值
    替换值
CAS带来的ABA问题:

Atomic类: CAS+自旋操作
    

